<Window x:Class="SaludTotal.Views.AddProfessional"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SaludTotal.Views"
        xmlns:components="clr-namespace:SaludTotal.Components"
        mc:Ignorable="d"
        Title="AddProfessional" Height="700" Width="800" Loaded="Window_Loaded">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </Window.Resources>
    <Grid>
        <Border>
            <Border.Background>
                <ImageBrush ImageSource="pack://application:,,,/Resources/Img/Fondo_desktop_1.jpg" Stretch="UniformToFill"/>
            </Border.Background>
        </Border>
        <Border HorizontalAlignment="Center" 
            VerticalAlignment="Center" 
            Background="{StaticResource BackgroundBrush}" 
            CornerRadius="15"
            Margin="0,0,0,0">
            <Border.Effect>
                <DropShadowEffect Color="Black" Direction="315" ShadowDepth="5" Opacity="0.3" BlurRadius="10"/>
            </Border.Effect>
            <ScrollViewer VerticalScrollBarVisibility="Auto"
                  HorizontalScrollBarVisibility="Auto">

                <Grid Margin="40">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0" Text="Gestión de Profesionales" 
                       FontSize="28" FontWeight="Bold" 
                       Foreground="#2C3E50" 
                       HorizontalAlignment="Center" 
                       Margin="0,0,0,20"/>

                    <TextBlock Grid.Row="1" Text="Ingrese los datos del profesional"
                       FontSize="16"
                       Foreground="{StaticResource SecondaryForegroundBrush}"
                        HorizontalAlignment="Left" />
                    <StackPanel Grid.Row="2"
                Orientation="Vertical"
                Margin="0,10,10,0"
                VerticalAlignment="Stretch"
                HorizontalAlignment="Stretch">

                        <TextBlock Text="Nombre:"
                    FontSize="14"
                    Foreground="{StaticResource ForegroundBrush}"
                    VerticalAlignment="Center"
                    Margin="0,0,10,0"
                    HorizontalAlignment="Stretch"/>

                        <TextBox x:Name="NameInput"
                    Style="{StaticResource RoundedValidationTextBox}"
                    Margin="0,5,0,5"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Stretch"
                    Text="{Binding Name, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/>

                        <ItemsControl
                        Margin="5, 0, 0, 0"
                        ItemsSource="{Binding ElementName=NameInput, Path=(Validation.Errors)}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="*" Style="{StaticResource ValidationErrorTextblock}"/>
                                        <TextBlock Text="{Binding ErrorContent}" Style="{StaticResource ValidationErrorTextblock}" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>

                    <!--LastName-->
                    <StackPanel Grid.Row="3"
                Orientation="Vertical"
                Margin="0,10,10,0"
                VerticalAlignment="Stretch"
                HorizontalAlignment="Stretch">

                        <TextBlock Text="Apellido:"
                   FontSize="14"
                   Foreground="{StaticResource ForegroundBrush}"
                   VerticalAlignment="Center"
                   Margin="0,0,10,0"
                   HorizontalAlignment="Stretch"/>

                        <TextBox x:Name="LastNameInput"
                     Style="{StaticResource RoundedValidationTextBox}"
                     Margin="0,5,0,5"
                     VerticalAlignment="Center"
                     HorizontalAlignment="Stretch"
                     Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/>

                        <ItemsControl
                        Margin="5, 0, 0, 0"
                        ItemsSource="{Binding ElementName=LastNameInput, Path=(Validation.Errors)}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="*" Style="{StaticResource ValidationErrorTextblock}"/>
                                        <TextBlock Text="{Binding ErrorContent}" Style="{StaticResource ValidationErrorTextblock}" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>

                    <!--Email-->
                    <StackPanel Grid.Row="4"
                Orientation="Vertical"
                Margin="0,10,10,0"
                VerticalAlignment="Stretch"
                HorizontalAlignment="Stretch">

                        <TextBlock Text="Email:"
                   FontSize="14"
                   Foreground="{StaticResource ForegroundBrush}"
                   VerticalAlignment="Center"
                   Margin="0,0,10,0"
                   HorizontalAlignment="Stretch"/>

                        <TextBox x:Name="EmailInput"
                     Style="{StaticResource RoundedValidationTextBox}"
                     Margin="0,5,0,5"
                     VerticalAlignment="Center"
                     HorizontalAlignment="Stretch"
                     Text="{Binding Email, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/>

                        <ItemsControl
                    Margin="5, 0, 0, 0"
                    ItemsSource="{Binding ElementName=EmailInput, Path=(Validation.Errors)}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="*" Style="{StaticResource ValidationErrorTextblock}"/>
                                        <TextBlock Text="{Binding ErrorContent}" Style="{StaticResource ValidationErrorTextblock}" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>

                    <!--Phone-->
                    <StackPanel Grid.Row="5"
                Orientation="Vertical"
                Margin="0,10,10,0"
                VerticalAlignment="Stretch"
                HorizontalAlignment="Stretch">

                        <TextBlock Text="Telefono:"
                   FontSize="14"
                   Foreground="{StaticResource ForegroundBrush}"
                   VerticalAlignment="Center"
                   Margin="0,0,10,0"
                   HorizontalAlignment="Stretch"/>

                        <TextBox x:Name="PhoneInput"
                     Style="{StaticResource RoundedValidationTextBox}"
                             PreviewTextInput="NumberValidationTextBox"
                     Margin="0,5,0,5"
                     VerticalAlignment="Center"
                     HorizontalAlignment="Stretch"
                     Text="{Binding Phone, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}">
                            <TextBox.InputScope>
                                <InputScope>
                                    <InputScope.Names>
                                        <InputScopeName NameValue="Number"/>
                                    </InputScope.Names>
                                </InputScope>
                            </TextBox.InputScope>
                        </TextBox>

                        <ItemsControl
                    Margin="5, 0, 0, 0"
                    ItemsSource="{Binding ElementName=PhoneInput, Path=(Validation.Errors)}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="*" Style="{StaticResource ValidationErrorTextblock}"/>
                                        <TextBlock Text="{Binding ErrorContent}" Style="{StaticResource ValidationErrorTextblock}" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>

                    <!--Speciality-->
                    <StackPanel Grid.Row="6"
                Orientation="Vertical"
                Margin="0,10,10,0"
                VerticalAlignment="Stretch"
                HorizontalAlignment="Stretch">

                        <TextBlock Text="Especialidad:"
                   FontSize="14"
                   Foreground="{StaticResource ForegroundBrush}"
                   VerticalAlignment="Center"
                   Margin="0,0,10,0"
                   HorizontalAlignment="Stretch"/>

                        <ComboBox
                        x:Name="SpecialtyComboBox"
                            Margin="0,5,0,5"
                        ItemsSource="{Binding Specialties}"
                        DisplayMemberPath="Key"
                        SelectedValuePath="Value"
                        SelectedValue="{Binding SpecialtyId, Mode=TwoWay, ValidatesOnDataErrors=True, NotifyOnValidationError=True, UpdateSourceTrigger=PropertyChanged}"
                        IsTextSearchEnabled="True"
                        Style="{StaticResource SearchableCombobox}"
                        IsEditable="True" />

                        <ItemsControl
                    Margin="5, 0, 0, 0"
                    ItemsSource="{Binding ElementName=SpecialtyComboBox, Path=(Validation.Errors)}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="*" Style="{StaticResource ValidationErrorTextblock}"/>
                                        <TextBlock Text="{Binding ErrorContent}" Style="{StaticResource ValidationErrorTextblock}" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                    
                    <!--ErrorDisplay-->
                    <StackPanel Margin="5" Grid.Row="7">
                        <components:MessageControl
                        MessageType="Error"
                        DataContext="{Binding ErrorMessageviewModel}"
                        Message="{Binding Message}"
                        HasMessage="{Binding HasMessage}" />
                    </StackPanel>

                    <!--StatusDisplay-->
                    <StackPanel Margin="5" Grid.Row="8">
                        <components:MessageControl
                        MessageType="Success"
                        DataContext="{Binding StatusMessageviewModel}"
                        Message="{Binding Message}"
                        HasMessage="{Binding HasMessage}" />
                    </StackPanel>

                    <!--Buttons-->
                    <StackPanel Margin="0, 10, 0, 10" Grid.Row="8" Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Style="{StaticResource PrimaryButtonStyle}"
                                Content="Guardar"
                                Margin="0,10,5,0"
                                HorizontalAlignment="Left"
                                IsEnabled="{Binding CanCreate}"
                                Command="{Binding CreateCommand}" Cursor="Hand"
                                />
                        <Button Style="{StaticResource SecondaryButtonStyle}"
                                Content="Cancelar"
                                Margin="0,10,5,0"
                                HorizontalAlignment="Left"
                                Command="{Binding CancelCommand}"
                                />
                    </StackPanel>
                </Grid>
            </ScrollViewer>
        </Border>
    </Grid>
</Window>
